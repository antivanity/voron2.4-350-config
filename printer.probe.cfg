#####################################################################
#   Probe
#####################################################################

#[probe] ### REPLACED BY [beacon]
#pin: EBBCan: PB5
#x_offset: 0
#y_offset: 0
##z_offset: 0
#speed: 5
#samples: 4
#samples_result: median
#sample_retract_dist: 3.0
#samples_tolerance: 0.01
#samples_tolerance_retries: 3



[beacon]
serial: /dev/serial/by-id/usb-Beacon_Beacon_RevH_A5D74E115154354D38202020FF0A3528-if00
x_offset: 0 # update with offset from nozzle on your machine
y_offset: 21.953 # update with offset from nozzle on your machine 
mesh_main_direction: x
mesh_runs: 2
z_settling_time:500


### FAST_QGL used by beacon!
[gcode_macro FAST_QGL]
gcode:
    M117 QUAD_GANTRY_LEVEL
    {% if printer.configfile.settings.quad_gantry_level %}
        {% if printer.quad_gantry_level.applied == False %}
            QUAD_GANTRY_LEVEL RETRY_TOLERANCE=1
        {% endif %}
        QUAD_GANTRY_LEVEL horizontal_move_z=2
    {% endif %} 

[gcode_macro CALIBRATE_BEACON]
gcode:
  M117 https://docs.beacon3d.com/quickstart/#6-calibrate-beacon
  CENTER
  BEACON_CALIBRATE

[gcode_macro PROBE_ACCURACY_BEACON]
gcode:
  M117 https://docs.beacon3d.com/quickstart/#7-basic-first-tests
  CENTER
  PROBE_ACCURACY